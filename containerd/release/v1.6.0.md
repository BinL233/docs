# containers v1.6

TBD

## 重要更新

### Runtime

#### Add runtime label to metrics https://github.com/containerd/containerd/pull/5744

监控信息中每一个容容器相关的监控信息中添加了runtime的label，方便用户在查看监控时区分不同的runtime

```bash
$ curl http://127.0.0.1:3338/v1/metrics
# HELP container_cpu_kernel_nanoseconds The total kernel cpu time
# TYPE container_cpu_kernel_nanoseconds gauge
container_cpu_kernel_nanoseconds{container_id="test120",namespace="default",runtime="io.containerd.runtime.v1.linux"} 1e+07
container_cpu_kernel_nanoseconds{container_id="test12345",namespace="default",runtime="io.containerd.other.v2"} 1e+07
# HELP container_cpu_throttle_periods_total The total cpu throttle periods
# TYPE container_cpu_throttle_periods_total gauge
container_cpu_throttle_periods_total{container_id="test120",namespace="default",runtime="io.containerd.runtime.v1.linux"} 0
container_cpu_throttle_periods_total{container_id="test12345",namespace="default",runtime="io.containerd.other.v2"} 0
# HELP container_cpu_throttled_periods_total The total cpu throttled periods
# TYPE container_cpu_throttled_periods_total gauge
container_cpu_throttled_periods_total{container_id="test120",namespace="default",runtime="io.containerd.runtime.v1.linux"} 0
container_cpu_throttled_periods_total{container_id="test12345",namespace="default",runtime="io.containerd.other.v2"} 0
# HELP container_cpu_throttled_time_nanoseconds The total cpu throttled time
# TYPE container_cpu_throttled_time_nanoseconds gauge
container_cpu_throttled_time_nanoseconds{container_id="test120",namespace="default",runtime="io.containerd.runtime.v1.linux"} 0
container_cpu_throttled_time_nanoseconds{container_id="test12345",namespace="default",runtime="io.containerd.other.v2"} 0
# HELP container_cpu_total_nanoseconds The total cpu time
# TYPE container_cpu_total_nanoseconds gauge
container_cpu_total_nanoseconds{container_id="test120",namespace="default",runtime="io.containerd.runtime.v1.linux"} 2.419375e+07
container_cpu_total_nanoseconds{container_id="test12345",namespace="default",runtime="io.containerd.other.v2"} 2.3298785e+07
# HELP container_cpu_user_nanoseconds The total user cpu time
```



#### Add runc shim support for core scheduling https://github.com/containerd/containerd/pull/6011



## Reference

1. https://github.com/containerd/containerd/issues/5742
2. https://github.com/containerd/containerd/blob/main/releases/v1.6.0-beta.toml